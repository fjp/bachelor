<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AID Coding Challenge - The Bachelor: AID Coding Challenge Solution</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AID Coding Challenge - The Bachelor
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AID Coding Challenge Solution </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is my updated solution for the AID Bachelor Coding Challenge. The readme of the previous version can be found here. For the problem description refer to the <a href="AID_Coding_Challenge.pdf">AID Coding Challenge.pdf</a>. The complete doxygen documentation can be found in the doc folder, see <a href="doc/html/index.html">index.html</a></p>
<h2>Changelog</h2>
<ul>
<li>Fixes diagonal cost value: uses sqrt(2) for the diagonal cost instead of 1.4f.</li>
<li>Fixes memory leaks caused by dangling pointers, mainly in the Child() method of planner.cpp.<ul>
<li>Valgrind shows no memory leaks anymore (see valgrind.xml) with the use of smart pointers (C++11 feature)</li>
<li>Now using smart pointers for the nodes</li>
<li>Uses <a href="https://en.cppreference.com/w/cpp/memory/shared_ptr">shared_ptr</a>, <a href="http://en.cppreference.com/w/cpp/memory/weak_ptr">std::weak_ptr</a> and <a href="http://en.cppreference.com/w/cpp/memory/enable_shared_from_this">std::enable_shared_from_this</a> and <a href="https://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this">shared_from_this()</a> for the cyclic dependency between rover interface and planner interface.</li>
<li>Use of smart pointers reduces memory consumption from approx 2 GB to 570 MB. This high memory is caused by creating child nodes while exploring new locations. Each node contains information that increase the memory used each time a new node is created.</li>
</ul>
</li>
<li>Uses double instead of float for the cost values to improve numerical inaccuracy because of diagonal step cost sqrt(2).</li>
<li>To verify the correctness of the current implementation this version adds two more implementations of A*, one from <a href="https://en.wikipedia.org/wiki/A*_search_algorithm#Pseudocode">Wikipedia</a> and the other from <a href="https://www.redblobgames.com/pathfinding/a-star/implementation.html#cpp-astar">Red Blob Games</a>.</li>
<li>The new A* implementations use less memory</li>
<li>Simplifies step cost model of the rover: instead of the physical model the rover now uses height costs that are percentage values of the step cost. The percentage step cost (height cost) is added to the current step cost if the rover moves uphill and subtracted if it moves downhill. The height cost calculation takes place in <a class="el" href="classplanner_1_1c_planner.html#a9d57a0697bb0e4666f4fd45f77c4a1aa" title="Calculates the height cost which is added or subtracted from the step cost. ">planner::cPlanner::HeightCost()</a>.</li>
<li>Ensures consistent heuristic with the chosen step cost and height cost model. This is achieved by normalizing the calculated octile heuristic value in <a class="el" href="classplanner_1_1c_planner.html#a77cefeae3d7a58a96c74b66f6be22611" title="Updates the heuristic value of the node located at tlocation i_sLocation. ">planner::cPlanner::Heuristic()</a>.</li>
<li>Fixes calculation of consistency output: h(x) &lt;= d(x,y) + h(y) with x as parent node and y as its successor.</li>
<li>In case of an inconsistent heuristic the boolean flag bConsistentHeuristic in the new member struct planner::tResult of cPlannerInterface is set to false.</li>
<li>Adds gTests that use a simplified map, including water and elevation transitions. The result struct is used to check the expected results.</li>
<li>Refactors visualizer<ul>
<li>Encapsulates the <a class="el" href="namespacevisualizer.html#ab4e649cd7413a51ac1ae4b31a2994c3a">visualizer::writeBMP()</a> function including its lambda</li>
<li>Adds option what to draw<ul>
<li>path,</li>
<li>locations such as start and goal passed as list of locations</li>
<li>NEW: show visited nodes</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/AnthonyCalandra/modern-cpp-features">C++11 features</a> used<ul>
<li>smart pointer: std::shared_ptr, std::weak_ptr, std::enable_shared_from_this, shared_from_this(), nullptr</li>
<li><a href="https://en.cppreference.com/w/cpp/language/lambda">Lambda expression</a></li>
<li><a href="https://en.cppreference.com/w/cpp/language/list_initialization">List initialization</a></li>
</ul>
</li>
</ul>
<div class="image">
<img src="doc/images/solution_rover_bachelor_wedding.bmp" alt="Solution Rover Bachelor Wedding" width="200"/>
</div>
<h2>Memory</h2>
<h2>Possible improvements</h2>
<ul>
<li>Use std::filesystem C++17 features to read and write elevation and overrides data.</li>
<li>std::chrono to time function calls.</li>
<li>std::array&lt;int, size&gt; with fixed map size instead of std::vector for the AStar Wikipedia version that allocates the closed and actino set beforehand. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
